---
title: 第8章 层论基础
description: 前预层、层、层的上同调
section: 1
---

# 第八章：层论基础——局部与整体的桥梁

> **本章导读**：层论是现代代数几何的核心工具，它提供了一种精妙的方式来组织局部信息并研究整体性质。从拓扑空间上的连续函数层到代数簇上的结构层，层无处不在。本章将介绍前预层、层的定义，以及层上同调的基本思想。

---

## 8.1 预层

### 8.1.1 预层的定义

**定义 8.1.1（前预层 / Presheaf）**
> 设 $X$ 是拓扑空间。$X$ 上的一个**前预层**（presheaf）$\mathscr{F}$ 包含：
> 1. 对每个开集 $U \subseteq X$， assign 一个集合/群/环 $\mathscr{F}(U)$
> 2. 对每个包含关系 $V \subseteq U$， assign 一个限制映射 $\text{res}_{U,V}: \mathscr{F}(U) \to \mathscr{F}(V)$
>
> 满足：
> - $\text{res}_{U,U} = \text{id}_{\mathscr{F}(U)}$
> - 若 $W \subseteq V \subseteq U$，则 $\text{res}_{U,W} = \text{res}_{V,W} \circ \text{res}_{U,V}$

**例子 8.1.2（常见的预层）**
1. **连续函数层**：$\mathscr{C}(U) = \{f: U \to \mathbb{R} \mid f \text{ 连续}\}$
2. **常数预层**：$\mathscr{F}(U) = A$（某个固定集合/群）
3. **可微函数层**：$\mathscr{C}^\infty(U)$
4. **局部常函数层**：$\mathscr{F}(U) = \{f: U \to A \mid f \text{ 局部常值}\}$

### 8.1.2 预层的态射

**定义 8.1.3（预层的态射）**
> 两个预层 $\mathscr{F}, \mathscr{G}$ 之间的**态射** $\varphi: \mathscr{F} \to \mathscr{G}$ 是一族映射：
> $$\varphi_U: \mathscr{F}(U) \to \mathscr{G}(U)$$
> 对每个开集 $U$，满足：若 $V \subseteq U$，则
> $$\varphi_V \circ \text{res}_{U,V}^{\mathscr{F}} = \text{res}_{U,V}^{\mathscr{G}} \circ \varphi_U$$

---

## 8.2 层

### 8.2.1 层的定义

**定义 8.2.1（层 / Sheaf）**
> 前预层 $\mathscr{F}$ 称为**层**（sheaf），如果满足以下两个额外条件：
> 1. **局部性**：若 $\{U_i\}$ 是开覆盖，$s \in \mathscr{F}(U)$ 满足 $\text{res}_{U,U_i}(s) = 0$ 对所有 $i$，则 $s = 0$
> 2. **粘合**：若 $\{U_i\}$ 是开覆盖，$s_i \in \mathscr{F}(U_i)$ 满足对所有 $i, j$：
>    $$\text{res}_{U_i, U_i \cap U_j}(s_i) = \text{res}_{U_j, U_i \cap U_j}(s_j)$$
>    则存在唯一的 $s \in \mathscr{F}(U)$ 使得 $\text{res}_{U,U_i}(s) = s_i$ 对所有 $i$

**例子 8.2.2**
- **连续函数层**：是层（局部定义的连续函数可以粘合）
- **局部常层**：是层
- **常数预层**（非局部常）：不是层

**例子 8.2.3（非层的预层）**
> 考虑拓扑空间 $X = \mathbb{R}$，定义前预层 $\mathscr{F}(U) = \{f: U \to \mathbb{R} \mid f \text{ 常数}\}$
> 这不是层，因为局部常值函数的粘合可能不连续。

### 8.2.2 层的芽

**定义 8.2.4（芽 / Germ）**
> 设 $x \in X$。$\mathscr{F}$ 在点 $x$ 处的**芽**（germ）是等价类：
> $$(U, s) \sim (V, t) \iff \exists W \subseteq U \cap V, x \in W, \text{res}_{U,W}(s) = \text{res}_{V,W}(t)$$
> 记作 $\mathscr{F}_x$。

**例子 8.2.5**
- 连续函数层的芽：连续函数在 $x$ 处的芽
- 可微函数层的芽：可微函数在 $x$ 处的芽

---

## 8.3 层的茎与截面

### 8.3.1 茎

**定义 8.3.1（茎 / Stalk）**
> 层 $\mathscr{F}$ 在点 $x$ 处的**茎**（stalk）是：
> $$\mathscr{F}_x = \varinjlim_{U \ni x} \mathscr{F}(U)$$
> 即所有包含 $x$ 的开集上的截面正向极限。

**例子 8.3.2**
- 连续函数层在 $x$ 处的茎：所有连续函数在 $x$ 处的芽的集合
- 结构层 $\mathscr{O}_X$ 在点的茎：局部环

### 8.3.2 整体截面

**定义 8.3.3（整体截面）**
> $H^0(X, \mathscr{F}) = \mathscr{F}(X)$ 称为 $\mathscr{F}$ 的**整体截面**（global sections）。

**例子 8.3.4**
- $H^0(X, \mathscr{C}) = X$ 上的全局连续函数
- $H^0(X, \mathscr{O}_X) = \mathscr{O}_X(X)$：环的整体函数

---

## 8.4 正合序列

### 8.4.1 层的正合性

**定义 8.4.1（层的正合序列）**
> 层的态射序列 $0 \to \mathscr{F} \xrightarrow{f} \mathscr{G} \xrightarrow{g} \mathscr{H}$ 是正合的，如果：
> 1. 在每个茎上正合：$0 \to \mathscr{F}_x \to \mathscr{G}_x \to \mathscr{H}_x$ 是正合的
> 2. $g$ 是满射（在茎上）

**注意**：层的正合性比预层复杂得多！

**例子 8.4.2**
> 考虑 $\mathbb{C}$ 上的指数层序列：
> $$0 \to \mathbb{Z} \xrightarrow{2\pi i} \mathscr{O} \xrightarrow{e^z - 1} \mathscr{O} \to 0$$
> 这不是正合的，因为 $e^z - 1$ 不是满射！

### 8.4.2 层的像与核

**定义 8.4.3**
> - **核** $\ker f$：$(\ker f)(U) = \ker(f_U: \mathscr{F}(U) \to \mathscr{G}(U))$
> - **像** $\operatorname{Im} f$：$\operatorname{Im} f$ 是满足 sheafification 的最小层
> - **余核** $\operatorname{coker} f$：类似定义

---

## 8.5 层上同调简介

### 8.5.1 为什么要上同调？

**问题**：为什么需要上同调？
- 正合序列 $0 \to \mathscr{F} \to \mathscr{G} \to \mathscr{H} \to 0$ 并不保证 $0 \to \mathscr{F}(X) \to \mathscr{G}(X) \to \mathscr{H}(X) \to 0$ 正合
- **上同调** 正是测量这种"失败"的工具

**定义 8.5.1（上同调群）**
> 定义层的上同调群 $H^i(X, \mathscr{F})$ 为：
> - $H^0(X, \mathscr{F}) = \mathscr{F}(X)$
> - $H^i(X, \mathscr{F}) = \mathbb{R}^i \Gamma(X, \mathscr{F})$（右导出函子）

### 8.5.2 例子

**例子 8.5.2（ Čech 上同调）**
> 对于开覆盖 $\mathfrak{U} = \{U_i\}$，定义：
> $$\check{H}^p(\mathfrak{U}, \mathscr{F}) = \text{ cohomology of Čech complex }$$

**例子 8.5.3（de Rham 上同调）**
> 对于光滑流形 $M$：
> $$H^k_{dR}(M, \mathbb{R}) \cong H^k(M, \underline{\mathbb{R}})$$

### 8.5.3 重要的上同调定理

**定理 8.5.4（Leray 定理）**
> 若层 $\mathscr{F}$ 在开覆盖 $\mathfrak{U}$ 上是acyclic，则 Čech 上同调等于层上同调。

**定理 8.5.5（Cartan 定理）**
> 凝聚层上的层上同调可以用 Čech 上同调计算。

---

## 8.6 导出函子

### 8.6.1 导出函子的定义

**定义 8.6.1（右导出函子）**
> 设 $F: \mathcal{A} \to \mathcal{B}$ 是左正合函子。$F$ 的**右导出函子** $R^i F$ 定义为：
> $$R^i F(A) = H^i(F(I^\bullet))$$
> 其中 $I^\bullet$ 是 $A$ 的内射分解。

**例子 8.6.2**
> - $F = \Gamma(X, -)$：整体截面函子
> - $R^i F(\mathscr{F}) = H^i(X, \mathscr{F})$：层上同调

### 8.6.2 局部自由层

**定义 8.6.3（局部自由层）**
> 层 $\mathscr{E}$ 称为**局部自由层**（locally free sheaf），如果存在开覆盖 $\{U_i\}$ 使得 $\mathscr{E}|_{U_i} \cong \mathscr{O}_{U_i}^{\oplus r}$。

**例子 8.6.4**
- 切层 $T_X$：不是局部自由（除非 $X$ 是光滑流形）
- 余切层 $\Omega_X$：局部自由

**定理 8.6.5（Serre 对偶，代数几何版本）**
> 对射影簇 $X$ 上的凝聚层 $\mathscr{F}$：
> $$H^i(X, \mathscr{F}) \cong H^{n-i}(X, \mathscr{F} \otimes \omega_X)^*$$

---

## 8.7 习题

### 基础题

1. 验证连续函数层确实满足层的定义。

2. 证明：局部常层是层，但常数预层不是层。

3. 描述层 $\mathscr{F}$ 在点 $x$ 的茎的定义。

4. 给出层的核、像、余核的具体构造。

5. 计算：$H^0(X, \underline{A})$（局部常层）的整体截面。

### 进阶题

6. **证明**：若 $0 \to \mathscr{F} \to \mathscr{G} \to \mathscr{H} \to 0$ 是层的正合序列，且 $\mathscr{F}$ 是内射层，则
   $$0 \to \mathscr{F}(X) \to \mathscr{G}(X) \to \mathscr{H}(X) \to 0$$
   正合。

7. 描述 $\mathbb{P}^1$ 上的除子层 $\mathscr{O}(n)$ 的整体截面。

8. 证明：Serre 对偶定理的一个简单版本（对于曲线）。

9. 探索：了解 Godement 层的构造。

10. **证明**：平坦层的上同调在基变更下保持。

### 挑战题

11. **证明** Cartan 定理 B：对于仿射开覆盖，$\check{H}^i(\mathfrak{U}, \mathscr{F}) = 0$ 对 $i > 0$。

12. 探索：了解层上同调与 Čech 上同调的关系。

13. **编程**：实现层的茎的计算（对简单情况）。

---

## 8.8 本章小结

### 核心概念

| 概念 | 符号 | 含义 |
|------|------|------|
| 前预层 | $\mathscr{F}$ | 开集上的数据 + 限制映射 |
| 层 | sheaf | 满足局部性和粘合性的前预层 |
| 茎 | $\mathscr{F}_x$ | 点附近的芽 |
| 芽 | germ | 局部等价的截面 |
| 上同调 | $H^i(X, \mathscr{F})$ | 层的导出函子 |
| 局部自由层 | $\mathscr{E}$ | 局部同构于 $\mathscr{O}^r$ |

### 重要定理

1. **层化**：每个前预层可以唯一扩展为层
2. **Cartan 定理 B**：仿射开覆盖的 Čech 上同调消失
3. **Serre 对偶**：$H^i(X, \mathscr{F}) \cong H^{n-i}(X, \mathscr{F} \otimes \omega_X)^*$

---

## 8.9 参考文献

1. **Hartshorne, R.** *Algebraic Geometry*. Springer, 1977.
2. **Godement, R.** *Topologie Algébrique et Théorie des Faisceaux*. Hermann, 1958.
3. ** Griffiths, P., Harris, J.** *Principles of Algebraic Geometry*. Wiley, 1978.
4. **Vakil, R.** *The Rising Sea: Foundations of Algebraic Geometry*. Available online.
5. **刘和平**。《层论基础》. 北京大学出版社, 2000.
